---
import { Image } from 'astro:assets';
import Container from './Container.astro';
import { homeThreeProjects } from '../data/home-three';

const { heading, cta, items, shape } = homeThreeProjects;

// Split items: first item for left column, rest for right column
const leftItem = items[0];
const rightItems = items.slice(1, 3);
---

<section class="pb-100 max-991:pb-80 max-767:pb-60">
  <Container>
    <div class="relative">
      <!-- Section Header -->
      <div class="reveal-bottom relative z-[2] mb-50 mr-120 max-991:mb-40 max-767:mb-30 max-767:mr-0">
        <div class="mb-12 flex flex-wrap items-center gap-15">
          <span class="h-2 w-64 rounded-50 bg-brand-primary max-479:w-30"></span>
          <span class="text-label font-semibold tracking-subtitle text-brand-primary">
            {heading.subtitle}
          </span>
        </div>
        <h2 class="section-heading mb-0 text-h2 tracking-h2 text-ink-heading xl:text-[46px] xl:leading-[55.2px]">
          {heading.title}
        </h2>
      </div>

      <!-- Projects Grid -->
      <div class="grid grid-cols-2 gap-30 max-767:grid-cols-1">
        <!-- Left Column - Single Large Project -->
        <div class="reveal-bottom" style="transition-delay: 0.15s">
          <article class="group relative overflow-hidden rounded-8">
            <div class="overflow-hidden">
              <a href={leftItem.href} class="block rounded-8">
                <Image
                  src={leftItem.image.src}
                  alt={leftItem.image.alt}
                  class="h-auto w-full transition-transform duration-300 group-hover:scale-110"
                  loading="lazy"
                  decoding="async"
                  width={570}
                  height={600}
                />
              </a>
            </div>
            <div class="absolute inset-x-0 bottom-0 z-[2] flex items-end justify-between gap-20 p-32 max-991:p-15 max-479:gap-10 max-479:px-12">
              <div class="w-[80%] flex-none">
                <a href={leftItem.href} class="block">
                  <h3 class="project-title mb-0 text-surface-white transition-colors duration-300 hover:text-brand-primary">
                    {leftItem.title}
                  </h3>
                </a>
              </div>
              <a
                href={leftItem.href}
                class="flex h-40 w-40 items-center justify-center rounded-full bg-surface-white text-brand-secondary scale-0 opacity-0 transition-all duration-300 group-hover:scale-100 group-hover:opacity-100 hover:bg-brand-secondary hover:text-surface-white max-479:h-35 max-479:w-35"
              >
                <svg viewBox="0 0 9 16" fill="none" class="h-16 w-[9px]" aria-hidden="true">
                  <path
                    d="M1.45898 1.39997L6.89232 6.83331C7.53399 7.47498 7.53399 8.52497 6.89232 9.16664L1.45898 14.6"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                </svg>
              </a>
            </div>
            <div class="project-overlay pointer-events-none absolute inset-0"></div>
          </article>
        </div>

        <!-- Right Column - Stacked Projects -->
        <div class="grid gap-30">
          {rightItems.map((item, index) => (
            <div class="reveal-bottom" style={`transition-delay: ${(index + 2) * 0.15}s`}>
              <article class="group relative overflow-hidden rounded-8">
                <div class="overflow-hidden">
                  <a href={item.href} class="block rounded-8">
                    <Image
                      src={item.image.src}
                      alt={item.image.alt}
                      class="h-auto w-full transition-transform duration-300 group-hover:scale-110"
                      loading="lazy"
                      decoding="async"
                      width={570}
                      height={285}
                    />
                  </a>
                </div>
                <div class="absolute inset-x-0 bottom-0 z-[2] flex items-end justify-between gap-20 p-32 max-991:p-15 max-479:gap-10 max-479:px-12">
                  <div class="w-[80%] flex-none">
                    <a href={item.href} class="block">
                      <h3 class="project-title mb-0 text-surface-white transition-colors duration-300 hover:text-brand-primary">
                        {item.title}
                      </h3>
                    </a>
                  </div>
                  <a
                    href={item.href}
                    class="flex h-40 w-40 items-center justify-center rounded-full bg-surface-white text-brand-secondary scale-0 opacity-0 transition-all duration-300 group-hover:scale-100 group-hover:opacity-100 hover:bg-brand-secondary hover:text-surface-white max-479:h-35 max-479:w-35"
                  >
                    <svg viewBox="0 0 9 16" fill="none" class="h-16 w-[9px]" aria-hidden="true">
                      <path
                        d="M1.45898 1.39997L6.89232 6.83331C7.53399 7.47498 7.53399 8.52497 6.89232 9.16664L1.45898 14.6"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-miterlimit="10"
                        stroke-linecap="round"
                        stroke-linejoin="round"></path>
                    </svg>
                  </a>
                </div>
                <div class="project-overlay pointer-events-none absolute inset-0"></div>
              </article>
            </div>
          ))}
        </div>
      </div>

      <!-- Shape Image -->
      <Image
        src={shape.src}
        alt={shape.alt}
        class="project-shape-animate pointer-events-none absolute right-[5.4%] top-[-1%] h-auto w-114 max-991:right-[2%] max-767:top-[-2%] max-767:w-80 max-479:top-[-4%] max-479:w-50"
        loading="lazy"
        decoding="async"
        width={114}
        height={68}
      />
    </div>

    <!-- CTA Button -->
    <div class="reveal-bottom mt-50 flex justify-center text-center max-991:mt-40 max-767:mt-30" style="transition-delay: 0.6s">
      <a
        href={cta.href}
        class="inline-flex items-center gap-8.5 rounded-50 border-1.5 border-solid border-ink-black px-24 py-12 text-[16px] font-medium leading-[24px] tracking-[-0.16px] text-ink-black transition-colors duration-300 hover:bg-ink-black hover:text-surface-white"
      >
        <span>{cta.label}</span>
        <svg viewBox="0 0 16 16" fill="none" class="mt-[3px] h-16 w-16" aria-hidden="true">
          <path
            d="M9.62012 3.95331L13.6668 7.99998L9.62012 12.0466"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-miterlimit="10"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M2.33325 8H13.5533"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-miterlimit="10"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </a>
    </div>
  </Container>
</section>

<style>
  @keyframes project-shape-zoom {
    0%,
    100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.15);
    }
  }

  .project-shape-animate {
    animation: project-shape-zoom 3s ease-in-out infinite;
  }

  .project-overlay {
    background-image: linear-gradient(to top, #131212, rgba(19, 18, 18, 0) 57%);
  }

  .project-title {
    font-size: 26px;
    line-height: 36.4px;
    font-weight: 500;
  }

  @media (max-width: 991px) {
    .section-heading {
      font-size: 38px;
      line-height: 48px;
    }

    .project-title {
      font-size: 22px;
      line-height: 33px;
    }
  }

  @media (max-width: 767px) {
    .section-heading {
      font-size: 32px;
      line-height: 42px;
    }

    .project-title {
      font-size: 24px;
      line-height: 34px;
    }
  }

  @media (max-width: 479px) {
    .section-heading {
      font-size: 28px;
      line-height: 36px;
    }

    .project-title {
      font-size: 21px;
      line-height: 31px;
    }

    .project-overlay {
      background-image: linear-gradient(to top, #131212, rgba(19, 18, 18, 0) 70%);
    }
  }
</style>
