---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import Container from './Container.astro';
import { projects } from '../data/projects';

const { excludeSlug } = Astro.props;
const items = (excludeSlug
  ? projects.items.filter((item) => item.slug !== excludeSlug)
  : projects.items).slice(0, 2);
---

<section class="pt-100 pb-100 max-991:pt-80 max-991:pb-80 max-767:pt-60 max-767:pb-60">
  <Container>
    <!-- section-content-block-three: grid 8fr/4fr, gap 15, items-center, mb-50; 991: mb-60; 767: 1fr 1fr, mb-30; 479: 1fr, gap 10, justify-items-center -->
    <div class="reveal mb-50 grid grid-cols-[8fr_4fr] items-center gap-15 max-991:mb-60 max-767:mb-30 max-767:grid-cols-[1fr_1fr] max-479:grid-cols-1 max-479:gap-[10px] max-479:justify-items-center">
      <!-- team-section-content-wrap -->
      <div>
        <!-- section-title margin-zero -->
        <h2 class="mb-0 xl:text-[46px] xl:leading-[55.2px]">More of Our Projects</h2>
      </div>
      <!-- section-content-button margin-zero align-right: text-right; 479: text-left -->
      <div class="mb-0 text-right max-479:text-left">
        <!-- button-outline-inline: inline-block -->
        <div class="inline-block">
          <!-- button-outline-link-wrap border-radius: flex, gap 8.5, border 1.5px black, rounded-50, px-24 py-12, 16px/24px, font-500, tracking -0.16px, color black; hover: bg-black text-white -->
          <a
            href="/projects"
            class="flex items-center gap-8.5 rounded-[50px] border-[1.5px] border-solid border-[#081120] px-24 py-12 text-[16px] font-medium leading-[24px] tracking-[-0.16px] text-[#081120] transition-colors duration-300 hover:bg-[#081120] hover:text-white"
          >
            <div>All Projects</div>
            <!-- button-outline-arrow-right: w-16 h-16 mt-3 relative -->
            <div class="relative mt-[3px] h-16 w-16 leading-[1em]">
              <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9.62012 3.95331L13.6668 7.99998L9.62012 12.0466" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M2.33325 8H13.5533" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- collection-list-more-project: grid 1fr 1fr, gap 30; 767: 1fr -->
    <div class="grid grid-cols-[1fr_1fr] gap-30 max-767:grid-cols-1">
      {items.map((item) => (
        <div class="reveal">
          <!-- single-project-wrap: rounded-8, relative, overflow-hidden -->
          <div class="group relative overflow-hidden rounded-8">
            <!-- project-image-wrap: overflow-hidden -->
            <div class="overflow-hidden">
              <!-- project-image-link: block, rounded-8 -->
              <a href={item.href} class="block rounded-8">
                <!-- project-image: w-full -->
                <Image
                  src={item.image.src as ImageMetadata}
                  alt={item.image.alt}
                  class="block h-auto w-full transition-transform duration-300 group-hover:scale-110"
                  loading="lazy"
                  decoding="async"
                  width={600}
                  height={400}
                />
              </a>
            </div>
            <!-- project-content-wrap: z-2, flex, justify-between, items-end, gap-20, p-32, absolute bottom-0 inset-x-0; 991: p-15; 479: gap-10 px-12 -->
            <div class="absolute inset-x-0 bottom-0 z-[2] flex items-end justify-between gap-20 p-[32px] max-991:p-15 max-479:gap-[10px] max-479:px-[12px]">
              <!-- project-title-wrap: flex 0 0 80% -->
              <div class="flex-[0_0_80%]">
                <a href={item.href} class="block">
                  <!-- project-title: color white, mb-0, transition color .3s; hover: primary; xl: 32px/41.6px; 991: 22px/33px; 767: 24px/34px; 479: 21px/31px -->
                  <h3 class="mb-0 text-white transition-colors duration-300 hover:text-brand-primary xl:text-[32px] xl:leading-[41.6px] max-991:text-[22px] max-991:leading-[33px] max-767:text-[24px] max-767:leading-[34px] max-479:text-[21px] max-479:leading-[31px]">
                    {item.title}
                  </h3>
                </a>
              </div>
              <!-- project-button-wrap -->
              <div>
                <!-- project-button-link: bg-white, text-secondary, rounded-full, w-40 h-40, flex center, lh-1em, transition; hover: bg-secondary text-white; 479: w-35 h-35 -->
                <a
                  href={item.href}
                  class="flex h-[40px] w-[40px] scale-0 items-center justify-center rounded-full bg-white leading-[1em] text-brand-secondary transition-all duration-300 group-hover:scale-100 hover:bg-brand-secondary hover:text-white max-479:h-[35px] max-479:w-[35px]"
                  aria-label={`View ${item.title}`}
                >
                  <!-- project-button-icon: w-9 h-16 -->
                  <div class="h-[16px] w-[9px]">
                    <svg viewBox="0 0 9 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M1.45898 1.39997L6.89232 6.83331C7.53399 7.47498 7.53399 8.52497 6.89232 9.16664L1.45898 14.6" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                </a>
              </div>
            </div>
            <!-- project-overly: gradient overlay, absolute inset-0 -->
            <div class="project-overlay-gradient pointer-events-none absolute inset-0"></div>
          </div>
        </div>
      ))}
    </div>
  </Container>
</section>

<style>
  /* project-overly: linear-gradient to top from #131212 to transparent at 57% */
  .project-overlay-gradient {
    background-image: linear-gradient(to top, #131212, #13121200 57%);
  }

  @media screen and (max-width: 479px) {
    .project-overlay-gradient {
      background-image: linear-gradient(to top, #131212, #13121200 70%);
    }
  }
</style>
